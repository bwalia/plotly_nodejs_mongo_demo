<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>UK Census Age Structures 2011 - Data Interpretation & Visualisation Tool</title>
  <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
  
    <link rel="stylesheet" HREF="bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" href="/bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css">
  

  <link rel="stylesheet" href="dist/css/skins/_all-skins.min.css">
  <!-- Plotly.js -->
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

</head>
<body class="hold-transition skin-blue sidebar-mini">
<div class="wrapper">

  <header class="main-header">
    <!-- Logo -->
    <a href="../../index2.html" class="logo">
      <!-- mini logo for sidebar mini 50x50 pixels -->
      <span class="logo-mini"><b>A</b>LT</span>
      <!-- logo for regular state and mobile devices -->
      <span class="logo-lg"><b>UK Census Data</b> 2011</span>
    </a>
    <!-- Header Navbar: style can be found in header.less -->
    <nav class="navbar navbar-static-top">
      <!-- Sidebar toggle button-->
     

      <div class="navbar-custom-menu">
        <ul class="nav navbar-nav">
          <!-- Messages: style can be found in dropdown.less-->
          <li class="dropdown messages-menu">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
              <i class="fa fa-envelope-o"></i>
              <span class="label label-success">4</span>
            </a>
       <ul class="dropdown-menu">
              <li class="header">You have 5 messages</li>
              <li>
                <!-- inner menu: contains the actual data -->
                <ul class="menu">
                  <li><!-- start message -->
                    <a href="#">
                      <div class="pull-left">
                        <img SRC="dist/img/avatar.png" class="img-circle" alt="User Image">
                      </div>
                      <h4>
                        Influencers list
                        <small><i class="fa fa-clock-o"></i> 5 mins</small>
                      </h4>
                      <p>Why not buy a new awesome marketing package?</p>
                    </a>
                  </li>
                  <!-- end message -->
                  <li>
                    <a href="#">
                      <div class="pull-left">
                        <img SRC="dist/img/avatar2.png" class="img-circle" alt="User Image">
                      </div>
                      <h4>
                        Marketing Stats
                        <small><i class="fa fa-clock-o"></i> 2 hours</small>
                      </h4>
                      <p>Why not buy a new awesome theme?</p>
                    </a>
                  </li>
                  <li>
                    <a href="#">
                      <div class="pull-left">
                        <img SRC="dist/img/avatar3.png" class="img-circle" alt="User Image">
                      </div>
                      <h4>
                        Developers
                        <small><i class="fa fa-clock-o"></i> Today</small>
                      </h4>
                      <p>Why not buy a new awesome package ?</p>
                    </a>
                  </li>
                  <li>
                    <a href="#">
                      <div class="pull-left">
                        <img SRC="dist/img/avatar.png" class="img-circle" alt="User Image">
                      </div>
                      <h4>
                        Sales Department
                        <small><i class="fa fa-clock-o"></i> Yesterday</small>
                      </h4>
                      <p>Why not buy a new awesome theme?</p>
                    </a>
                  </li>
                  <li>
                    <a href="#">
                      <div class="pull-left">
                        <img SRC="dist/img/avatar04.png" class="img-circle" alt="User Image">
                      </div>
                      <h4>
                        Reviewers
                        <small><i class="fa fa-clock-o"></i> 2 days</small>
                      </h4>
                      <p>Why not buy a new awesome package?</p>
                    </a>
                  </li>
				  
				  
				  
				  
				  
				 
                </ul>
              </li>
              <li class="footer"><a href="#">See All Messages</a></li>
            </ul>
          </li>
          <!-- Notifications: style can be found in dropdown.less -->
          <li class="dropdown notifications-menu">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
              <i class="fa fa-bell-o"></i>
              <span class="label label-warning">10</span>
            </a>
            <ul class="dropdown-menu">
              <li class="header">You have 10 notifications</li>
              <li>
                <!-- inner menu: contains the actual data -->
                <ul class="menu">
                  <li>
                    <a href="#">
                      <i class="fa fa-users text-aqua"></i> 5 new influencers joined today
                    </a>
                  </li>
                  <li>
                    <a href="#">
                      <i class="fa fa-warning text-yellow"></i> Very long description here that may not fit into the
                      page and may cause design problems
                    </a>
                  </li>
                  <li>
                    <a href="#">
                      <i class="fa fa-users text-red"></i> 5 new influencers joined
                    </a>
                  </li>
                  <li>
                    <a href="#">
                      <i class="fa fa-shopping-cart text-green"></i> 25 sales made
                    </a>
                  </li>
                  <li>
                    <a href="#">
                      <i class="fa fa-user text-red"></i> You changed your username
                    </a>
                  </li>
                </ul>
              </li>
              <li class="footer"><a href="#">View all</a></li>
            </ul>
          </li>
          <!-- Tasks: style can be found in dropdown.less -->
          <li class="dropdown tasks-menu">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
              <i class="fa fa-flag-o"></i>
              <span class="label label-danger">9</span>
            </a>
            <ul class="dropdown-menu">
              <li class="header">You have 9 tasks</li>
              <li>
                <!-- inner menu: contains the actual data -->
                <ul class="menu">
                  <li><!-- Task item -->
                    <a href="#">
                      <h3>
                        Design some buttons
                        <small class="pull-right">20%</small>
                      </h3>
                      <div class="progress xs">
                        <div class="progress-bar progress-bar-aqua" style="width: 20%" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100">
                          <span class="sr-only">20% Complete</span>
                        </div>
                      </div>
                    </a>
                  </li>
                  <!-- end task item -->
                  <li><!-- Task item -->
                    <a href="#">
                      <h3>
                        Create a nice theme
                        <small class="pull-right">40%</small>
                      </h3>
                      <div class="progress xs">
                        <div class="progress-bar progress-bar-green" style="width: 40%" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100">
                          <span class="sr-only">40% Complete</span>
                        </div>
                      </div>
                    </a>
                  </li>
                  <!-- end task item -->
                  <li><!-- Task item -->
                    <a href="#">
                      <h3>
                        Some task I need to do
                        <small class="pull-right">60%</small>
                      </h3>
                      <div class="progress xs">
                        <div class="progress-bar progress-bar-red" style="width: 60%" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100">
                          <span class="sr-only">60% Complete</span>
                        </div>
                      </div>
                    </a>
                  </li>
                  <!-- end task item -->
                  <li><!-- Task item -->
                    <a href="#">
                      <h3>
                        Make beautiful transitions
                        <small class="pull-right">80%</small>
                      </h3>
                      <div class="progress xs">
                        <div class="progress-bar progress-bar-yellow" style="width: 80%" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100">
                          <span class="sr-only">80% Complete</span>
                        </div>
                      </div>
                    </a>
                  </li>
                  <!-- end task item -->
                </ul>
              </li>
              <li class="footer">
                <a href="#">View all tasks</a>
              </li>
            </ul>
          </li>
          <!-- User Account: style can be found in dropdown.less -->
          
          <!-- Control Sidebar Toggle Button -->
          
        </ul>
      </div>
    </nav>
  </header>
  

  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
      <h1>
      
        <small>UK Census Age Structures 2011</small>
      </h1>
      <ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
        <li><a href="#">Data Interpretation & Visualisation Tool</a></li>
     
      </ol>
    </section>

    <!-- Main content -->
    <section class="content">
      
      <div class="row">
        <div class="col-md-12 content">
		<h2>Age Structure - England and Wales March 2011 (To view increasing population in real time (in simulation mode), click on VIEW ENLARGED CHART link below.</h2>
		<p>
		Age Structure Data Analysis Tool shows how real time information is retrieved from MongoDB server which is updated constantly and then represented to users instantly. In order to simulate the real time information updates I randomly add a few hundred thousands of persons in existing real 2011 census data in mongo and then reload the charts and queries. <a target="_blank" href="https://task1.tenthmatrix.co.uk/test7">VIEW ENLARGED CHART</a>
		</p>
		
          <!-- AREA CHART -->
          <div class="box box-primary">
            <div class="box-header with-border">
              <h3 class="box-title">Key stats</h3>
              <div class="box-tools pull-right">
                <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
                </button>
                <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
              </div>
            
            <label>Select Area : </label>
<select class="form-control" id="area" onChange="loadChart7Data()">
	<option value="K04000001" selected>England and Wales</option>
	<option value="E92000001">England</option>
	<option value="E12000001">North East</option>
	<option value="E06000047">County Durham UA</option>
	<option value="E12000002">NORTH WEST </option>
	<option value="E12000003">YORKSHIRE AND THE HUMBER</option>
	<option value="E12000004">EAST MIDLANDS</option>
	<option value="E12000005">WEST MIDLANDS</option>
	<option value="E12000007">LONDON</option>
	<option value="E12000008">SOUTH EAST</option>
	<option value="E12000009">SOUTH WEST</option>
	<option value="W92000004">WALES</option>
</select>
<label>Display As : </label>
<select class="form-control" id="display" onChange="loadChart7Data()">
	<option value="Count" selected>Total Count</option>
	<option value="Percentage">Percentage</option>
</select>

            </div>
            
            <div class="box-body chart-responsive">
              <div id="myDiv"><!-- Plotly chart will be drawn inside this DIV --></div>

            </div>
            <!-- /.box-body -->
          </div>
		  <h2>Age Structure - England and Wales March 2011 (Males/Females )</h2>
		<p>This table provides information about the age structure, pie chart of different age groups of <span class="locName"></span> as at census day, 27 March 2011. <a target="_blank" href="https://task1.tenthmatrix.co.uk/male_female">VIEW ENLARGED CHART</a>
		</p>
		  
		  <div class="box box-success">
            <div class="box-header with-border">
              <h3 class="box-title">Pie Chart (Males/Females)</h3>

              <div class="box-tools pull-right">
                <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
                </button>
                <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
              </div>
              
                                        <select class="form-control" id="area" onChange="generateChart2()">
	<option value="K04000001" selected>England and Wales</option>
	<option value="E92000001">England</option>
	<option value="E12000001">North East</option>
	<option value="E06000047">County Durham UA</option>
	<option value="E12000002">NORTH WEST </option>
	<option value="E12000003">YORKSHIRE AND THE HUMBER</option>
	<option value="E12000004">EAST MIDLANDS</option>
	<option value="E12000005">WEST MIDLANDS</option>
	<option value="E12000007">LONDON</option>
	<option value="E12000008">SOUTH EAST</option>
	<option value="E12000009">SOUTH WEST</option>
	<option value="W92000004">WALES</option>
</select>

              

              
            </div>
            <div class="box-body chart-responsive">
<div id="myDiv1" ><!-- Plotly chart will be drawn inside this DIV --></div>
            </div>
            <!-- /.box-body -->
          </div>
		  
          <!-- BUBBLE CHART -->
		  <h2>Age Structure - England and Wales March 2011 (Males/Females )</h2>
		<p>This table provides information about the age structure, pie chart of different age groups of <span class="locName"></span> as at census day, 27 March 2011. (Bubble chart fully interactive) <a target="_blank" href="https://task1.tenthmatrix.co.uk/test1">VIEW ENLARGED CHART</a>
		</p>

          <div class="box box-info">
            <div class="box-header with-border">
              <h3 class="box-title">            <a href="https://task1.tenthmatrix.co.uk/test4" target="_blank" >Age Structure - England and Wales March 2011 (Person count by regions)</a>
</h3>

              <div class="box-tools pull-right">
                <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
                </button>
                <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
              </div>
              
              <select class="form-control" id="areaChart1Data" onChange="loadChart1Data()">
	<option value="K04000001" selected>England and Wales</option>
	<option value="E92000001">England</option>
	<option value="E12000001">North East</option>
	<option value="E06000047">County Durham UA</option>
	<option value="E12000002">NORTH WEST </option>
	<option value="E12000003">YORKSHIRE AND THE HUMBER</option>
	<option value="E12000004">EAST MIDLANDS</option>
	<option value="E12000005">WEST MIDLANDS</option>
	<option value="E12000007">LONDON</option>
	<option value="E12000008">SOUTH EAST</option>
	<option value="E12000009">SOUTH WEST</option>
	<option value="W92000004">WALES</option>
</select>
<label>Display As : </label>
<select class="form-control" id="displayChart1Data" onChange="loadChart1Data()">
	<option value="Count" selected>Total Count</option>
	<option value="Percentage">Percentage</option>
</select>

              
            </div>
            <div class="box-body chart-responsive">
<div id="Chart1Data" ><!-- Plotly chart will be drawn inside this DIV --></div>
            </div>
            <!-- /.box-body -->
          </div>
          <!-- /.box -->


          <!-- PIE CHART -->
          		  <h2>Age Structure - England and Wales March 2011 (Males/Females )</h2>
		<p>Age Structure - England and Wales March 2011 (Percentage by UK regions, Pie chart - user can click on each slice and legend items to show hide) <a target="_blank" href="https://task1.tenthmatrix.co.uk/test6">VIEW ENLARGED CHART</a>
		</p>
		<p>Click on the legend items to hide or show the relevant information.</a>
		</p>


          <div class="box box-danger">
            <div class="box-header with-border">
            

              <div class="box-tools pull-right">
                <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
                </button>
                <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
              </div>
              <label>Select Area : </label>
<select class="form-control" id="areaChart6Data" onChange="loadChart6Data()">
	<option value="K04000001" selected>England and Wales</option>
	<option value="E92000001">England</option>
	<option value="E12000001">North East</option>
	<option value="E06000047">County Durham UA</option>
	<option value="E12000002">NORTH WEST </option>
	<option value="E12000003">YORKSHIRE AND THE HUMBER</option>
	<option value="E12000004">EAST MIDLANDS</option>
	<option value="E12000005">WEST MIDLANDS</option>
	<option value="E12000007">LONDON</option>
	<option value="E12000008">SOUTH EAST</option>
	<option value="E12000009">SOUTH WEST</option>
	<option value="W92000004">WALES</option>
</select>
<label>Display As : </label>
<select class="form-control" id="displayChart6Data" onChange="loadChart6Data()">
	<option value="Count" selected>Total Count</option>
	<option value="Percentage">Percentage</option>
</select>

            </div>
            <div class="box-body chart-responsive">

<div id="Chart6Data" ><!-- Plotly chart will be drawn inside this DIV --></div>

            <a href="https://task1.tenthmatrix.co.uk/test1" target="_blank" >Age Structure - England and Wales March 2011 (Person count by regions, Bubble chart interactive)</a><br>
            <a href="https://task1.tenthmatrix.co.uk/test4" target="_blank" >Age Structure - England and Wales March 2011 (Person count by regions)</a><br>
            <a href="https://task1.tenthmatrix.co.uk/test6" target="_blank" >Age Structure - England and Wales March 2011 (Percentage by UK regions, Pie chart - user can click on each slice and legend items to show hide).</a><br>
            </div>
            <!-- /.box-body -->
          </div>
          <!-- /.box -->

        </div>
        <!-- /.col (RIGHT) -->
      </div>
      <!-- /.row -->

    </section>
    <!-- /.content -->
  </div>
  <!-- /.content-wrapper -->
  <footer class="main-footer">
    
    <strong>Copyright &copy; 2016-2017 <a href="https://uk.linkedin.com/in/bwalia" target="_blank">Balinder Walia</a>.</strong> All rights
    reserved.
  </footer>

  <!-- Control Sidebar -->
  <aside class="control-sidebar control-sidebar-dark">
    <!-- Create the tabs -->
    <ul class="nav nav-tabs nav-justified control-sidebar-tabs">
      <li><a href="#control-sidebar-home-tab" data-toggle="tab"><i class="fa fa-home"></i></a></li>
      <li><a href="#control-sidebar-settings-tab" data-toggle="tab"><i class="fa fa-gears"></i></a></li>
    </ul>
    <!-- Tab panes -->
    <div class="tab-content">
      <!-- Home tab content -->
      <div class="tab-pane" id="control-sidebar-home-tab">
        <h3 class="control-sidebar-heading">Recent Influencer's Activity</h3>
        <ul class="control-sidebar-menu">
          <li>
            <a href="javascript:void(0)">
              <i class="menu-icon fa fa-birthday-cake bg-red"></i>

              <div class="menu-info">
                <h4 class="control-sidebar-subheading">Langdon's Birthday</h4>

                <p>Will be 23 on April 24th</p>
              </div>
            </a>
          </li>
          <li>
            <a href="javascript:void(0)">
              <i class="menu-icon fa fa-user bg-yellow"></i>

              <div class="menu-info">
                <h4 class="control-sidebar-subheading">Frodo Updated His Profile</h4>

                <p>New phone +1(800)555-1234</p>
              </div>
            </a>
          </li>
          <li>
            <a href="javascript:void(0)">
              <i class="menu-icon fa fa-envelope-o bg-light-blue"></i>

              <div class="menu-info">
                <h4 class="control-sidebar-subheading">Nora Joined Mailing List</h4>

                <p>nora@example.com</p>
              </div>
            </a>
          </li>
          <li>
            <a href="javascript:void(0)">
              <i class="menu-icon fa fa-file-code-o bg-green"></i>

              <div class="menu-info">
                <h4 class="control-sidebar-subheading">Cron Job 254 Executed</h4>

                <p>Execution time 5 seconds</p>
              </div>
            </a>
          </li>
        </ul>
        <!-- /.control-sidebar-menu -->

        <h3 class="control-sidebar-heading">Tasks Progress</h3>
        <ul class="control-sidebar-menu">
          <li>
            <a href="javascript:void(0)">
              <h4 class="control-sidebar-subheading">
                Custom Template Design
                <span class="label label-danger pull-right">70%</span>
              </h4>

              <div class="progress progress-xxs">
                <div class="progress-bar progress-bar-danger" style="width: 70%"></div>
              </div>
            </a>
          </li>
          <li>
            <a href="javascript:void(0)">
              <h4 class="control-sidebar-subheading">
                Update Resume
                <span class="label label-success pull-right">95%</span>
              </h4>

              <div class="progress progress-xxs">
                <div class="progress-bar progress-bar-success" style="width: 95%"></div>
              </div>
            </a>
          </li>
          <li>
            <a href="javascript:void(0)">
              <h4 class="control-sidebar-subheading">
                Laravel Integration
                <span class="label label-warning pull-right">50%</span>
              </h4>

              <div class="progress progress-xxs">
                <div class="progress-bar progress-bar-warning" style="width: 50%"></div>
              </div>
            </a>
          </li>
          <li>
            <a href="javascript:void(0)">
              <h4 class="control-sidebar-subheading">
                Back End Framework
                <span class="label label-primary pull-right">68%</span>
              </h4>

              <div class="progress progress-xxs">
                <div class="progress-bar progress-bar-primary" style="width: 68%"></div>
              </div>
            </a>
          </li>
        </ul>
        <!-- /.control-sidebar-menu -->

      </div>
      <!-- /.tab-pane -->
      <!-- Stats tab content -->
      <div class="tab-pane" id="control-sidebar-stats-tab">Stats Tab Content</div>
      <!-- /.tab-pane -->
      <!-- Settings tab content -->
      <div class="tab-pane" id="control-sidebar-settings-tab">
        <form method="post">
          <h3 class="control-sidebar-heading">General Settings</h3>

          <div class="form-group">
            <label class="control-sidebar-subheading">
              Report panel usage
              <input type="checkbox" class="pull-right" checked>
            </label>

            <p>
              Some information about this general settings option
            </p>
          </div>
          <!-- /.form-group -->

          <div class="form-group">
            <label class="control-sidebar-subheading">
              Allow mail redirect
              <input type="checkbox" class="pull-right" checked>
            </label>

            <p>
              Other sets of options are available
            </p>
          </div>
          <!-- /.form-group -->

          <div class="form-group">
            <label class="control-sidebar-subheading">
              Expose author name in posts
              <input type="checkbox" class="pull-right" checked>
            </label>

            <p>
              Allow the user to show his name in blog posts
            </p>
          </div>
          <!-- /.form-group -->

          <h3 class="control-sidebar-heading">Chat Settings</h3>

          <div class="form-group">
            <label class="control-sidebar-subheading">
              Show me as online
              <input type="checkbox" class="pull-right" checked>
            </label>
          </div>
          <!-- /.form-group -->

          <div class="form-group">
            <label class="control-sidebar-subheading">
              Turn off notifications
              <input type="checkbox" class="pull-right">
            </label>
          </div>
          <!-- /.form-group -->

          <div class="form-group">
            <label class="control-sidebar-subheading">
              Delete chat history
              <a href="javascript:void(0)" class="text-red pull-right"><i class="fa fa-trash-o"></i></a>
            </label>
          </div>
          <!-- /.form-group -->
        </form>
      </div>
      <!-- /.tab-pane -->
    </div>
  </aside>
  <!-- /.control-sidebar -->
  <!-- Add the sidebar's background. This div must be placed
       immediately after the control sidebar -->
  <div class="control-sidebar-bg"></div>
</div>
<!-- ./wrapper -->

<!-- jQuery 2.2.3 -->
<script src="plugins/jQuery/jquery-2.2.3.min.js"></script>
<!-- Bootstrap 3.3.6 -->
<script src="bootstrap/js/bootstrap.min.js"></script>
<!-- Morris.js charts -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
<script src="plugins/morris/morris.min.js"></script>
<!-- FastClick -->
<script src="plugins/fastclick/fastclick.js"></script>
<!-- AdminLTE App -->
<script src="dist/js/app.min.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="dist/js/demo.js"></script>
<!-- page script -->
<script>

//chart 1
var count=0, contentArr7=[], locNameStr="", displayAs="", columnsNameArr=[] ;
$(document).ready(function() {
	loadChart7Data();
	generateChart7();//setInterval(generateChart7, 1000);	
	loadChart1Data();
	loadChart6Data();
});
function generateChart7(){
	var data=[],yArr=[]; 
	//console.log(contentArr7);
	$.each(contentArr7, function(i ,row){
		if(count!=0){
			row=parseInt(row)+parseInt(getRandomizer());
		}
		yArr.push(row);
	});
	contentArr7=yArr;
	var trace= {
    	x: columnsNameArr,
    	y: yArr,
		marker:{
    		color: ['rgba(222,45,38,0.8)', 'rgba(204,204,204,1)', , 'rgba(0,0,255,0.3)', 'rgba(255,255,0,0.3)', 'rgba(192,192,192,0.3)', 'rgba(255,0,255,0.3)', 'rgba(0,128,0,0.6)', 'rgba(0,255,255,0.2)', 'rgba(128,128,0,0.3)' , 'rgba(0,0,255,0.6)', 'rgba(128,0,128,0.9)','rgba(0,0,128,0.1)', 'rgba(0,0,128,0.4)',  'rgba(0,255,0,0.9)','rgba(255,0,0,0.8)']
  		},
    	type: 'bar'
  	}
  	
  	data.push(trace);
  			
  	var layout = {
  		title: locNameStr+': Age Structure',
  		yaxis: {
    		title: displayAs,
  		}
 	};
 	$("#myDiv").html("");
	Plotly.newPlot('myDiv', data, layout);
	count++;
}

function getRandomizer() {
	var bottom=500000, top=1000000;
	if(displayAs=="Percentage"){
		var bottom=2, top=10;
	}
	
	return Math.floor( Math.random() * ( 1 + top - bottom ) ) + bottom;
}
function loadChart7Data(){
	contentArr7=[];
	count=0;
	locNameStr=$("#area :selected").text();
	$(".locName").html(locNameStr);
	displayAs=$("#display").val();
	//alert(displayAs);
	
	var jsonRow="https://task1.tenthmatrix.co.uk/search-results?area="+$("#area").val()+"&searchby="+displayAs;
	$.getJSON(jsonRow,function(response){
		if(response.error){
			//
		}else{
			var columnsValArr=[];
			$.each(response.columnDetails, function(i ,row){
				columnsNameArr.push(row["ColumnVariableDescription"]);
				columnsValArr.push(row["ColumnVariableCode"]);
			});
			$.each(response.aaData, function(index ,value){
				if(columnsValArr.indexOf(index) != -1){  
					contentArr7.push(value);
				}
			});
			
			generateChart7();
		}
	});
}

//chart 1

//chart 2

var matchArr2=["KS101EW0002", "KS101EW0003"];
var contentArr="";
function generateChart2(){
	var locNameStr=$("#area :selected").text();
	$(".locName").html(locNameStr);
	var data2=[];
	var codeStr=$("#area").val();
	$.each(contentArr, function(i, row){
		if(row['GeographyCode']==codeStr){
			var yArr2=[];
			$.each(row, function(index, value){
				if(matchArr2.indexOf(index) != -1){  
   					yArr2.push(value);
				}
			});
			
  			var trace2= {
    			labels: ["Male", "Female"],
    			values: yArr2,
    			type: 'pie'
  			}
  			data2.push(trace2);
		}
	});
	
 	var layout2 = {
 		height: 500,
  		width: 700
	};
	Plotly.newPlot('myDiv1', data2, layout2);
}


Plotly.d3.csv('https://task1.tenthmatrix.co.uk/data/KS101EWDATA.CSV', function(err, rows){
	contentArr=rows;
	generateChart2();
});
//chart 2


//chart 3

function sortNumber(a,b) {
    return a - b;
}
function loadChart1Data(){
	var locNameStr=$("#area :selected").text();
	$(".locNameChart1Data").html(locNameStr);
	var area=$("#areaChart1Data").val();
	var displayAs=$("#displayChart1Data").val();
	var jsonRow="/search-results?area="+area+"&searchby="+displayAs;
	$.getJSON(jsonRow,function(response){
		if(response.error){
			//
		}else{
			var columnsValArr=[];
			$.each(response.columnDetails, function(i ,row){
				if(row["ColumnVariableCode"]!="KS102EW0001"){
					columnsValArr.push(row["ColumnVariableCode"]);
				}
			});
			
			var data=[], yArr=[], valueArr=[],sizeArr=[];
			$.each(response.aaData, function(index ,value){
				if(columnsValArr.indexOf(index) != -1){  
   					yArr.push(value);
   					valueArr.push(value);
				}
			});
			
			var newArr={};
			valueArr= valueArr.sort(sortNumber);
			$.each(valueArr, function(index ,value){
				newArr[value]=index;
			});	
		
			$.each(yArr, function(i ,row){
				var sizeNum=parseInt(newArr[row])*5;
				sizeArr.push(sizeNum);
			});	
			
			var trace = {
  				x: [0, 4, 7, 9, 14, 15, 17, 19, 24, 29, 44, 59, 64, 74, 84, 89, 100],
  				y: yArr,
  				marker: {
    				color: ['rgba(222,45,38,0.8)', 'rgba(204,204,204,1)', , 'rgba(0,0,255,0.3)', 'rgba(255,255,0,0.3)', 'rgba(192,192,192,0.3)', 'rgba(255,0,255,0.3)', 'rgba(0,128,0,0.6)', 'rgba(0,255,255,0.2)', 'rgba(128,128,0,0.3)' , 'rgba(0,0,255,0.6)', 'rgba(128,0,128,0.9)','rgba(0,0,128,0.1)', 'rgba(0,0,128,0.4)',  'rgba(0,255,0,0.9)','rgba(255,0,0,0.8)'],
   			 		size: sizeArr
   			 	},
  				mode: 'markers'
			};
			
  			data.push(trace);
  			var layout = {
  				xaxis: {title: 'Age'},
  				yaxis: {title: displayAs},
  				margin: {t: 20},
  				hovermode: 'closest'
			};

			Plotly.newPlot('Chart1Data', data, layout);
		}
	});
}
//chart 3

//chart 6

function loadChart6Data(){
	var locNameStr=$("#area :selected").text();
	$(".locName").html(locNameStr);
	var area=$("#areaChart6Data").val();
	var displayAs=$("#displayChart6Data").val();
	var jsonRow="/search-results?area="+area+"&searchby="+displayAs;
	$.getJSON(jsonRow,function(response){
		if(response.error){
			//
		}else{
			var columnsValArr=[], columnsNameArr=[];
			$.each(response.columnDetails, function(i ,row){
				if(row["ColumnVariableCode"]!="KS102EW0001"){
					columnsNameArr.push(row["ColumnVariableDescription"]);
					columnsValArr.push(row["ColumnVariableCode"]);
				}
			});
			
			var data=[], yArr=[];
			$.each(response.aaData, function(index ,value){
				if(columnsValArr.indexOf(index) != -1){  
   					yArr.push(value);
				}
			});
			var trace= {
    			labels: columnsNameArr,
    			values: yArr,
    			type: 'pie'
  			}
			
  			data.push(trace);
  			
  			var layout = {
 				height: 500,
  				width: 700
			};
 			
			Plotly.newPlot('Chart6Data', data, layout);
		}
	});
}

//chart 6
</script>
</body>
</html>
